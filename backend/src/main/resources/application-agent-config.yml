# ============================================================
# Agent 配置示例
# 将此配置合并到 application.yml 中
# ============================================================

agent:
  react:
    # ========== 执行控制 ==========
    max-iterations: 15              # Agent 最大迭代次数
    execution-timeout: 90s          # Agent 总执行超时（秒）
    tool-execution-timeout: 30s     # 单个工具超时（秒）
    llm-timeout: 20s                # LLM 调用超时（秒）

    # ========== 循环检测 ==========
    loop-detection-threshold: 3     # 连续相同动作视为循环的次数
    history-window-size: 3          # Prompt 中展示的历史记录条数

    # ========== 状态管理 ==========
    conversation-history-limit: 20  # 对话历史保留条数
    state-cache-ttl: 1h             # 状态缓存过期时间

    # ========== 输入验证 ==========
    message-min-length: 1           # 消息最小长度
    message-max-length: 2000        # 消息最大长度
    enable-input-sanitization: true # 启用输入内容过滤
    enable-prompt-injection-protection: true  # 启用 Prompt 注入防护
    enable-log-masking: true        # 启用日志脱敏

    # ========== 性能优化 ==========
    enable-llm-response-cache: false  # LLM 响应缓存（实验性）
    llm-cache-ttl: 5m               # LLM 缓存过期时间

    # ========== 监控与调试 ==========
    enable-verbose-logging: false   # 详细日志（生产环境建议 false）
    include-reasoning-history: true # 返回推理历史
    prompt-log-truncate-length: 200 # Prompt 日志截断长度

# ============================================================
# 不同环境的配置示例
# ============================================================

---
# 开发环境
spring:
  config:
    activate:
      on-profile: dev

agent:
  react:
    enable-verbose-logging: true    # 开发环境启用详细日志
    execution-timeout: 120s         # 开发环境超时可以更长
    enable-log-masking: false       # 开发环境不脱敏便于调试

---
# 生产环境
spring:
  config:
    activate:
      on-profile: prod

agent:
  react:
    enable-verbose-logging: false   # 生产环境关闭详细日志
    execution-timeout: 60s          # 生产环境更严格的超时
    enable-log-masking: true        # 生产环境必须脱敏
    enable-input-sanitization: true # 生产环境必须过滤
    enable-prompt-injection-protection: true  # 生产环境必须防护

---
# 测试环境
spring:
  config:
    activate:
      on-profile: test

agent:
  react:
    max-iterations: 5               # 测试环境减少迭代次数
    execution-timeout: 30s          # 测试环境快速失败
    enable-llm-response-cache: true # 测试环境启用缓存节省成本
